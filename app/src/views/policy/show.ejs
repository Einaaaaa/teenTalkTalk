<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Admin Page</title>
  <link rel="stylesheet" href="/semantic/layout.css">
  <link rel="stylesheet" href="/semantic/semantic.min.css">
  <link rel="stylesheet" href="/css/home/mem.css">
  <link rel="stylesheet" href="/css/home/admin.css">
  <link rel="stylesheet" href="/css/home/policy.css">
  <script src="/ckeditor/build/ckeditor.js"></script>
  <!-- <script src="https://cdn.ckeditor.com/ckeditor5/34.0.0/classic/ckeditor.js"></script> -->
  <!-- <script src="https://cdn.ckeditor.com/ckeditor5/34.0.0/classic/translations/ko.js"></script> -->
</head>
<body>
  <div id='rectanglel3' class='rectanglel3'></div>
  <div id='rectangleb3' class='rectangleb3'></div>
  <%- include('../layout.ejs') %>
<section>
    <div>
        <div class="pagename">정책 정보 관리</div>
        <table id="policy_table">
            <thead>
                <tr>
                    <th>정책 번호</th>
                    <th>정책 이름</th>
                    <th>정책 내용</th>
                    <th>정책 대상</th>
                    <th>접수 시작일</th>
                    <th>접수 마감일</th>
                    <th>수정</th>
                    <th>삭제</th>
                </tr>
            </thead>
            <tbody>
            <% for(var i=0; i< posts.length; i++){ %>
              <tr>
                <td><%= i+1 %></td>
                <td><%= posts[i].policy_name %></td>
                <td><%= posts[i].description %></td>
                <td><%= posts[i].policy_target_code %></td>
                <td><%= `${posts[i].application_start_date.getFullYear()}` + `-`+ `${posts[i].application_start_date.getMonth()+1}` + `-`+ `${posts[i].application_start_date.getDate()}`%></td>
                <td><%= `${posts[i].application_end_date.getFullYear()}` + `-`+ `${posts[i].application_end_date.getMonth()+1}` + `-`+ `${posts[i].application_end_date.getDate()}`%></td>
                <td><a href="/admin/policy/update/<%=posts[i].board_idx %>">수정</a></td>
                <td><a href="/admin/policy/delete/<%= posts[i].board_idx %>" onclick="return delPol()">삭제</a></td>
                <script>
                  function delPol(){
                    if(confirm("정말 삭제하시겠습니까?")){
                      return true;
                    }else{
                      return false;
                    }
                  }
                </script>
              </tr>
            <!-- </form> -->
            <% } %>
            </tbody>
        </table>
    </div>
    <button class="ui button" id="policy_reg_btn" onclick="location.href='/admin/policy/upload'">등록</button>
    <!-- <button class="ui button" id="add_users" onclick="regiAll()">일괄 등록</button> -->
    <div id="policy_paging">
      <div class="ui pagination menu">
        <!-- <a class="icon item" href="/admin/policy/show/?page=1">처음</a> -->
        <% var prev = page-1; %>
        <% if(prev < 1){ prev = 1; } %>
        <a class="icon item" href="/admin/policy/show/?page=<%=prev %>">이전</a>
        <!-- 현재 페이지 기준 5페이지만 보여주기 -->
        <% var startPage = page-3; %>
        <% var endPage = page+3; %>
        <% if(startPage < 1){ startPage = 1; } %>
        <% if(endPage > totalPage){ endPage = totalPage; } %>
        <% for(var i=startPage; i<=endPage; i++){ %>
          <a class="item" href="/admin/policy/show/?page=<%=i %>"><%=i %></a>
        <% } %>
        <% var next = page+1; %>
        <% if(next > totalPage){ next = totalPage; } %>
        <a class="icon item" href="/admin/policy/show/?page=<%=next %>">다음</a>
        <!-- <a class="icon item" href="/admin/policy/show/?page=<%=totalPage %>">끝</a> -->
      </div>
    </div>
</section>